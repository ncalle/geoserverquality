<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view contentType="text/html">
	<h:head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>Datos de Usuarios</title>

		<link rel="stylesheet"
			href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" />
		<link href="./css/form_list.css" rel="stylesheet" />
	</h:head>

	<h:body>
		<nav
			class="navbar navbar-static-top navbar-dark bg-inverse navbar-inverse">
			<a class="navbar-brand" href="#">GeoServiceQuality</a>
			<ul class="nav navbar-nav">
				<li class="nav-item"><a class="nav-link"
					href="${request.contextPath}/welcome.jsp">Home</a></li>
				<li class="nav-item"><a class="nav-link"
					href="${request.contextPath}/measurableObjectList.xhtml">Objetos
						de evaluación</a></li>
				<li class="nav-item"><a class="nav-link"
					href="${request.contextPath}/profileList.xhtml">Perfiles</a></li>
				<li class="nav-item"><a class="nav-link"
					href="${request.contextPath}/welcome.jsp">Evaluaciones</a></li>
				<li class="nav-item"><a class="nav-link"
					href="${request.contextPath}/welcome.jsp">Reportes</a></li>
				<li class="nav-item active"><a class="nav-link"
					href="${request.contextPath}/userList.xhtml">Usuarios<span
						class="sr-only">(current)</span></a></li>
				<li class="nav-item"><a class="nav-link"
					href="${request.contextPath}/welcome.jsp">Acerca</a></li>

			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="${pageContext.request.contextPath}/logoutServlet"><span
						class="glyphicon glyphicon-log-in"></span> Logout</a></li>
			</ul>
		</nav>

		<div class="container">

			<h:form id="users" class="form-signin" action="" method="post">
				<h2 class="form-signin-heading">Datos de Usuarios</h2>

				<hr></hr>
				<p:dataTable id="users" value="#{userBeanList.listUsers}" var="item"
					styleClass="userTable"
					rowKey="#{item.getUserId()}"
					selection="#{userBeanList.selectedUser}" selectionMode="single"
					style="margin-bottom:40" rows="10" paginator="true"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="5,10,15"
					widgetVar="50" editable="true">

					<p:column headerText="ID" sortBy="#{item.getUserId()}">
						<h:outputText value="#{item.getUserId()}" />
					</p:column>

					<p:column headerText="Institución" sortBy="#{item.institutionName}">
           				<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{item.institutionName}" /></f:facet>
               				<f:facet name="input"><p:inputText id="institutionNameInput" value="#{item.institutionName}" style="width:100%"/></f:facet>
           				</p:cellEditor>						
					</p:column>

					<p:column headerText="Email" sortBy="#{item.email}">
           				<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{item.email}" /></f:facet>
               				<f:facet name="input"><p:inputText id="emailInput" value="#{item.email}" style="width:100%"/></f:facet>
           				</p:cellEditor>						
					</p:column>

					<p:column headerText="Tipo" sortBy="#{item.userGroupName}">
           				<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{item.userGroupName}" /></f:facet>
               				<f:facet name="input"><p:inputText id="userGroupNameInput" value="#{item.userGroupName}" style="width:100%"/></f:facet>
           				</p:cellEditor>						
					</p:column>

					<p:column headerText="Nombre" sortBy="#{item.firstName}">
           				<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{item.firstName}" /></f:facet>
               				<f:facet name="input"><p:inputText id="firstNameInput" value="#{item.firstName}" style="width:100%"/></f:facet>
           				</p:cellEditor>
					</p:column>

					<p:column headerText="Apellido" sortBy="#{item.lastName}">
           				<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{item.lastName}" /></f:facet>
               				<f:facet name="input"><p:inputText id="lastNameInput" value="#{item.lastName}" style="width:100%"/></f:facet>
           				</p:cellEditor>
					</p:column>

					<p:column headerText="Telefono" sortBy="#{item.phoneNumber}">
           				<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{item.phoneNumber}" /></f:facet>
               				<f:facet name="input"><p:inputText id="phoneNumberInput" value="#{item.phoneNumber}" style="width:100%"/></f:facet>
           				</p:cellEditor>
       				</p:column>

                    <p:column headerText="Acciones">  
                        <p:rowEditor />  
                    </p:column>		
				</p:dataTable>

				<p:contextMenu for="users">
					<p:menuitem value="Eliminar" update="users" icon="ui-icon-trash" actionListener="#{userBeanList.deleteUser}" />
				</p:contextMenu>

				<div class="panel panel-default">
					<div class="panel-body">

						<a class="btn btn-default"
							href="${request.contextPath}/userAdd.xhtml">Agregar <span
							class="glyphicon glyphicon-plus" aria-hidden="true"></span></a> <a
							class="btn btn-default" href="${request.contextPath}/welcome.jsp">Editar
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						</a>
					</div>
				</div>
			</h:form>
		</div>

		<div class="container">
			<h:form id="evobject" class="form-signin" action="" method="post">
				<h2 class="form-signin-heading">Objetos Medibles - Usuario ID:
					xxxx</h2>

				<hr></hr>
				<div class="panel panel-default">
					<div class="panel-body">

						<h:dataTable styleClass="table table-striped"
							value="#{measurableObjectBeanList.listObjects}" var="item">
							<h:column>
								<f:facet name="header"> URL</f:facet>
								<h:outputText value="#{item.measurableObjectURL}" />
							</h:column>
						</h:dataTable>

					</div>
				</div>
			</h:form>
		</div>

		<script
			src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
		<script src="../../assets/js/vendor/jquery.min.js"></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script>
		<script src="../../dist/js/bootstrap.min.js"></script>
		<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

	</h:body>
</f:view>
</html>
